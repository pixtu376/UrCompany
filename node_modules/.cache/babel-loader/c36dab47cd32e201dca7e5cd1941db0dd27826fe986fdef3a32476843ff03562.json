{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\denis\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F\\\\my-app\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useState, useContext, useEffect, useRef, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const [tariffs, setTariffs] = useState([]);\n  const [accessToken, setAccessToken] = useState(null);\n  const [refreshToken, setRefreshToken] = useState(null);\n  const navigate = useNavigate();\n  const isMounted = useRef(true);\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  const login = async credentials => {\n    try {\n      const response = await fetch('/auth/token/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n      if (!response.ok) {\n        throw new Error('Ошибка авторизации');\n      }\n      const data = await response.json();\n      setAccessToken(data.access);\n      setRefreshToken(data.refresh);\n      const userData = await fetchUser(data.access);\n      // Навигация в зависимости от роли пользователя\n      if (userData && userData.is_staff) {\n        navigate('/admin-tariffs');\n      } else if (userData && userData.is_worker) {\n        navigate('/worker');\n      } else {\n        navigate('/dashboard');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n    }\n  };\n  const refreshAccessToken = useCallback(async () => {\n    if (!refreshToken) {\n      return null;\n    }\n    try {\n      const response = await fetch('/auth/token/refresh/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          refresh: refreshToken\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Ошибка обновления токена');\n      }\n      const data = await response.json();\n      setAccessToken(data.access);\n      return data.access;\n    } catch (error) {\n      console.error('Error refreshing access token:', error);\n      logout();\n      return null;\n    }\n  }, [refreshToken]);\n  const authFetch = useCallback(async (url, options = {}, retry = true) => {\n    if (!options.headers) {\n      options.headers = {};\n    }\n    if (accessToken) {\n      options.headers['Authorization'] = `Bearer ${accessToken}`;\n    }\n    let response = await fetch(url, options);\n    if (response.status === 401 && retry) {\n      const newAccessToken = await refreshAccessToken();\n      if (newAccessToken) {\n        options.headers['Authorization'] = `Bearer ${newAccessToken}`;\n        response = await fetch(url, options);\n      }\n    }\n    return response;\n  }, [accessToken, refreshAccessToken]);\n  const fetchUser = async token => {\n    try {\n      console.log('Access token in fetchUser:', token);\n      const response = await authFetch('/users/me/', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.status === 401) {\n        console.error('Unauthorized in fetchUser, redirecting to login');\n        setUser(null);\n        setAccessToken(null);\n        setRefreshToken(null);\n        if (isMounted.current) {\n          navigate('/login');\n        }\n        return null;\n      }\n      const data = await response.json();\n      if (data) {\n        setUser(data);\n        console.log('User is_worker:', data.is_worker);\n        await fetchOrders(data.id, token);\n        await fetchTariffs(token);\n        return data;\n      } else {\n        setUser(null);\n        setOrders([]);\n        return null;\n      }\n    } catch (error) {\n      console.error('Error fetching user:', error);\n      return null;\n    }\n  };\n  const fetchTariffs = async () => {\n    try {\n      const response = await authFetch('/tariffs/');\n      if (!response.ok) {\n        throw new Error('Ошибка загрузки тарифов');\n      }\n      const data = await response.json();\n      setTariffs(data);\n    } catch (error) {\n      console.error('Error fetching tariffs:', error);\n      setTariffs([]);\n    }\n  };\n  const updateUser = async updatedData => {\n    if (!accessToken || !user) {\n      console.error('No access token or user to update');\n      return;\n    }\n    try {\n      console.log('Updating user with data:', updatedData);\n      const response = await authFetch(`/users/${user.id}/`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updatedData)\n      });\n      console.log('Update user response status:', response.status);\n      if (response.status === 401) {\n        console.error('Unauthorized in updateUser, redirecting to login');\n        setUser(null);\n        setAccessToken(null);\n        setRefreshToken(null);\n        if (isMounted.current) {\n          navigate('/login');\n        }\n        return;\n      }\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response text:', errorText);\n        throw new Error('Ошибка обновления пользователя');\n      }\n      const data = await response.json();\n      console.log('Updated user data:', data);\n      setUser(data);\n    } catch (error) {\n      console.error('Error updating user:', error);\n    }\n  };\n  const fetchOrders = async userId => {\n    try {\n      console.log('Fetching orders for userId:', userId);\n      const response = await authFetch(`/orders/?user=${userId}`);\n      const data = await response.json();\n      console.log('Orders fetched:', data);\n      setOrders(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n      setOrders([]);\n    }\n  };\n  const fetchAllOrders = useCallback(async () => {\n    try {\n      const response = await authFetch(`/orders/`);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response text:', errorText);\n        setOrders([]);\n        return;\n      }\n      const data = await response.json();\n      console.log('All orders fetched:', data);\n      setOrders(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching all orders:', error);\n      setOrders([]);\n    }\n  }, [authFetch]);\n  const createOrder = async tariffId => {\n    try {\n      const body = {\n        tariff_id: tariffId\n      };\n      console.log('Request body in createOrder:', body);\n      const response = await authFetch('/orders/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      });\n      const newOrder = await response.json();\n      console.log('Response from createOrder:', newOrder);\n      if (!response.ok) {\n        throw new Error(JSON.stringify(newOrder));\n      }\n      setOrders([...orders, newOrder]);\n      return newOrder;\n    } catch (error) {\n      console.error('Error creating order:', error);\n    }\n  };\n  const logout = () => {\n    setUser(null);\n    setAccessToken(null);\n    setRefreshToken(null);\n    if (isMounted.current) {\n      navigate('/login');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      orders,\n      setOrders,\n      tariffs,\n      setTariffs,\n      login,\n      createOrder,\n      updateUser,\n      fetchUser,\n      fetchAllOrders,\n      fetchTariffs,\n      accessToken,\n      logout,\n      authFetch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 3\n  }, this);\n}\n_s(AuthProvider, \"tXVaA3AuTKc/CQh6+AHB4LzLeks=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  return useContext(AuthContext);\n}\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","useContext","useEffect","useRef","useCallback","useNavigate","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","orders","setOrders","tariffs","setTariffs","accessToken","setAccessToken","refreshToken","setRefreshToken","navigate","isMounted","current","login","credentials","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","access","refresh","userData","fetchUser","is_staff","is_worker","error","console","refreshAccessToken","logout","authFetch","url","options","retry","status","newAccessToken","token","log","Authorization","fetchOrders","id","fetchTariffs","updateUser","updatedData","errorText","text","userId","Array","isArray","fetchAllOrders","createOrder","tariffId","tariff_id","newOrder","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/denis/OneDrive/Документы/Курсовая/my-app/src/contexts/AuthContext.js"],"sourcesContent":["import { createContext, useState, useContext, useEffect, useRef, useCallback } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport function AuthProvider({ children }) {\r\n\tconst [user, setUser] = useState(null)\r\n\tconst [orders, setOrders] = useState([])\r\n\tconst [tariffs, setTariffs] = useState([])\r\n\tconst [accessToken, setAccessToken] = useState(null)\r\n\tconst [refreshToken, setRefreshToken] = useState(null)\r\n\tconst navigate = useNavigate()\r\n\tconst isMounted = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst login = async credentials => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch('/auth/token/', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify(credentials),\r\n\t\t\t})\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error('Ошибка авторизации')\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tsetAccessToken(data.access)\r\n\t\t\tsetRefreshToken(data.refresh)\r\n\t\t\tconst userData = await fetchUser(data.access)\r\n\t\t\t// Навигация в зависимости от роли пользователя\r\n\t\t\tif (userData && userData.is_staff) {\r\n\t\t\t\tnavigate('/admin-tariffs')\r\n\t\t\t} else if (userData && userData.is_worker) {\r\n\t\t\t\tnavigate('/worker')\r\n\t\t\t} else {\r\n\t\t\t\tnavigate('/dashboard')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Login error:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst refreshAccessToken = useCallback(async () => {\r\n\t\tif (!refreshToken) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst response = await fetch('/auth/token/refresh/', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify({ refresh: refreshToken }),\r\n\t\t\t})\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error('Ошибка обновления токена')\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tsetAccessToken(data.access)\r\n\t\t\treturn data.access\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error refreshing access token:', error)\r\n\t\t\tlogout()\r\n\t\t\treturn null\r\n\t\t}\r\n\t}, [refreshToken])\r\n\r\n\tconst authFetch = useCallback(async (url, options = {}, retry = true) => {\r\n\t\tif (!options.headers) {\r\n\t\t\toptions.headers = {}\r\n\t\t}\r\n\t\tif (accessToken) {\r\n\t\t\toptions.headers['Authorization'] = `Bearer ${accessToken}`\r\n\t\t}\r\n\t\tlet response = await fetch(url, options)\r\n\t\tif (response.status === 401 && retry) {\r\n\t\t\tconst newAccessToken = await refreshAccessToken()\r\n\t\t\tif (newAccessToken) {\r\n\t\t\t\toptions.headers['Authorization'] = `Bearer ${newAccessToken}`\r\n\t\t\t\tresponse = await fetch(url, options)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn response\r\n\t}, [accessToken, refreshAccessToken])\r\n\r\n\tconst fetchUser = async (token) => {\r\n\t\ttry {\r\n\t\t\tconsole.log('Access token in fetchUser:', token)\r\n\t\t\tconst response = await authFetch('/users/me/', {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tif (response.status === 401) {\r\n\t\t\t\tconsole.error('Unauthorized in fetchUser, redirecting to login')\r\n\t\t\t\tsetUser(null)\r\n\t\t\t\tsetAccessToken(null)\r\n\t\t\t\tsetRefreshToken(null)\r\n\t\t\t\tif (isMounted.current) {\r\n\t\t\t\t\tnavigate('/login')\r\n\t\t\t\t}\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tif (data) {\r\n\t\t\t\tsetUser(data)\r\n\t\t\t\tconsole.log('User is_worker:', data.is_worker)\r\n\t\t\t\tawait fetchOrders(data.id, token)\r\n\t\t\t\tawait fetchTariffs(token)\r\n\t\t\t\treturn data\r\n\t\t\t} else {\r\n\t\t\t\tsetUser(null)\r\n\t\t\t\tsetOrders([])\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching user:', error)\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchTariffs = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await authFetch('/tariffs/')\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error('Ошибка загрузки тарифов')\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tsetTariffs(data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching tariffs:', error)\r\n\t\t\tsetTariffs([])\r\n\t\t}\r\n\t}\r\n\r\n\tconst updateUser = async (updatedData) => {\r\n\t\tif (!accessToken || !user) {\r\n\t\t\tconsole.error('No access token or user to update')\r\n\t\t\treturn\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconsole.log('Updating user with data:', updatedData)\r\n\t\t\tconst response = await authFetch(`/users/${user.id}/`, {\r\n\t\t\t\tmethod: 'PATCH',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(updatedData),\r\n\t\t\t})\r\n\t\t\tconsole.log('Update user response status:', response.status)\r\n\t\t\tif (response.status === 401) {\r\n\t\t\t\tconsole.error('Unauthorized in updateUser, redirecting to login')\r\n\t\t\t\tsetUser(null)\r\n\t\t\t\tsetAccessToken(null)\r\n\t\t\t\tsetRefreshToken(null)\r\n\t\t\t\tif (isMounted.current) {\r\n\t\t\t\t\tnavigate('/login')\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tconst errorText = await response.text()\r\n\t\t\t\tconsole.error('Error response text:', errorText)\r\n\t\t\t\tthrow new Error('Ошибка обновления пользователя')\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tconsole.log('Updated user data:', data)\r\n\t\t\tsetUser(data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error updating user:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchOrders = async (userId) => {\r\n\t\ttry {\r\n\t\t\tconsole.log('Fetching orders for userId:', userId)\r\n\t\t\tconst response = await authFetch(`/orders/?user=${userId}`)\r\n\t\t\tconst data = await response.json()\r\n\t\t\tconsole.log('Orders fetched:', data)\r\n\t\t\tsetOrders(Array.isArray(data) ? data : [])\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching orders:', error)\r\n\t\t\tsetOrders([])\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchAllOrders = useCallback(async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await authFetch(`/orders/`)\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tconst errorText = await response.text()\r\n\t\t\t\tconsole.error('Error response text:', errorText)\r\n\t\t\t\tsetOrders([])\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tconsole.log('All orders fetched:', data)\r\n\t\t\tsetOrders(Array.isArray(data) ? data : [])\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching all orders:', error)\r\n\t\t\tsetOrders([])\r\n\t\t}\r\n\t}, [authFetch])\r\n\r\n\tconst createOrder = async tariffId => {\r\n\t\ttry {\r\n\t\t\tconst body = { tariff_id: tariffId }\r\n\t\t\tconsole.log('Request body in createOrder:', body)\r\n\t\t\tconst response = await authFetch('/orders/', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(body),\r\n\t\t\t})\r\n\t\t\tconst newOrder = await response.json()\r\n\t\t\tconsole.log('Response from createOrder:', newOrder)\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error(JSON.stringify(newOrder))\r\n\t\t\t}\r\n\t\t\tsetOrders([...orders, newOrder])\r\n\t\t\treturn newOrder\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error creating order:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst logout = () => {\r\n\t\tsetUser(null)\r\n\t\tsetAccessToken(null)\r\n\t\tsetRefreshToken(null)\r\n\t\tif (isMounted.current) {\r\n\t\t\tnavigate('/login')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ user, orders, setOrders, tariffs, setTariffs, login, createOrder, updateUser, fetchUser, fetchAllOrders, fetchTariffs, accessToken, logout, authFetch }}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n\r\nexport function useAuth() {\r\n\treturn useContext(AuthContext)\r\n}\r\n"],"mappings":";;;AAAA,SAASA,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AAC3F,SAASC,WAAW,QAAQ,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,WAAW,gBAAGT,aAAa,CAAC,CAAC;AAEnC,OAAO,SAASU,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAC1C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACkB,WAAW,EAAEC,cAAc,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACoB,YAAY,EAAEC,eAAe,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAMsB,QAAQ,GAAGjB,WAAW,CAAC,CAAC;EAC9B,MAAMkB,SAAS,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACf,OAAO,MAAM;MACZqB,SAAS,CAACC,OAAO,GAAG,KAAK;IAC1B,CAAC;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,KAAK,GAAG,MAAMC,WAAW,IAAI;IAClC,IAAI;MACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,cAAc,EAAE;QAC5CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,WAAW;MACjC,CAAC,CAAC;MACF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;QACjB,MAAM,IAAIC,KAAK,CAAC,oBAAoB,CAAC;MACtC;MACA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAClClB,cAAc,CAACiB,IAAI,CAACE,MAAM,CAAC;MAC3BjB,eAAe,CAACe,IAAI,CAACG,OAAO,CAAC;MAC7B,MAAMC,QAAQ,GAAG,MAAMC,SAAS,CAACL,IAAI,CAACE,MAAM,CAAC;MAC7C;MACA,IAAIE,QAAQ,IAAIA,QAAQ,CAACE,QAAQ,EAAE;QAClCpB,QAAQ,CAAC,gBAAgB,CAAC;MAC3B,CAAC,MAAM,IAAIkB,QAAQ,IAAIA,QAAQ,CAACG,SAAS,EAAE;QAC1CrB,QAAQ,CAAC,SAAS,CAAC;MACpB,CAAC,MAAM;QACNA,QAAQ,CAAC,YAAY,CAAC;MACvB;IACD,CAAC,CAAC,OAAOsB,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;IACrC;EACD,CAAC;EAED,MAAME,kBAAkB,GAAG1C,WAAW,CAAC,YAAY;IAClD,IAAI,CAACgB,YAAY,EAAE;MAClB,OAAO,IAAI;IACZ;IACA,IAAI;MACH,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAC,sBAAsB,EAAE;QACpDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEM,OAAO,EAAEnB;QAAa,CAAC;MAC/C,CAAC,CAAC;MACF,IAAI,CAACO,QAAQ,CAACO,EAAE,EAAE;QACjB,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;MAC5C;MACA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAClClB,cAAc,CAACiB,IAAI,CAACE,MAAM,CAAC;MAC3B,OAAOF,IAAI,CAACE,MAAM;IACnB,CAAC,CAAC,OAAOM,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtDG,MAAM,CAAC,CAAC;MACR,OAAO,IAAI;IACZ;EACD,CAAC,EAAE,CAAC3B,YAAY,CAAC,CAAC;EAElB,MAAM4B,SAAS,GAAG5C,WAAW,CAAC,OAAO6C,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAEC,KAAK,GAAG,IAAI,KAAK;IACxE,IAAI,CAACD,OAAO,CAACpB,OAAO,EAAE;MACrBoB,OAAO,CAACpB,OAAO,GAAG,CAAC,CAAC;IACrB;IACA,IAAIZ,WAAW,EAAE;MAChBgC,OAAO,CAACpB,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUZ,WAAW,EAAE;IAC3D;IACA,IAAIS,QAAQ,GAAG,MAAMC,KAAK,CAACqB,GAAG,EAAEC,OAAO,CAAC;IACxC,IAAIvB,QAAQ,CAACyB,MAAM,KAAK,GAAG,IAAID,KAAK,EAAE;MACrC,MAAME,cAAc,GAAG,MAAMP,kBAAkB,CAAC,CAAC;MACjD,IAAIO,cAAc,EAAE;QACnBH,OAAO,CAACpB,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUuB,cAAc,EAAE;QAC7D1B,QAAQ,GAAG,MAAMC,KAAK,CAACqB,GAAG,EAAEC,OAAO,CAAC;MACrC;IACD;IACA,OAAOvB,QAAQ;EAChB,CAAC,EAAE,CAACT,WAAW,EAAE4B,kBAAkB,CAAC,CAAC;EAErC,MAAML,SAAS,GAAG,MAAOa,KAAK,IAAK;IAClC,IAAI;MACHT,OAAO,CAACU,GAAG,CAAC,4BAA4B,EAAED,KAAK,CAAC;MAChD,MAAM3B,QAAQ,GAAG,MAAMqB,SAAS,CAAC,YAAY,EAAE;QAC9ClB,OAAO,EAAE;UACR0B,aAAa,EAAE,UAAUF,KAAK;QAC/B;MACD,CAAC,CAAC;MACF,IAAI3B,QAAQ,CAACyB,MAAM,KAAK,GAAG,EAAE;QAC5BP,OAAO,CAACD,KAAK,CAAC,iDAAiD,CAAC;QAChE/B,OAAO,CAAC,IAAI,CAAC;QACbM,cAAc,CAAC,IAAI,CAAC;QACpBE,eAAe,CAAC,IAAI,CAAC;QACrB,IAAIE,SAAS,CAACC,OAAO,EAAE;UACtBF,QAAQ,CAAC,QAAQ,CAAC;QACnB;QACA,OAAO,IAAI;MACZ;MACA,MAAMc,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAClC,IAAID,IAAI,EAAE;QACTvB,OAAO,CAACuB,IAAI,CAAC;QACbS,OAAO,CAACU,GAAG,CAAC,iBAAiB,EAAEnB,IAAI,CAACO,SAAS,CAAC;QAC9C,MAAMc,WAAW,CAACrB,IAAI,CAACsB,EAAE,EAAEJ,KAAK,CAAC;QACjC,MAAMK,YAAY,CAACL,KAAK,CAAC;QACzB,OAAOlB,IAAI;MACZ,CAAC,MAAM;QACNvB,OAAO,CAAC,IAAI,CAAC;QACbE,SAAS,CAAC,EAAE,CAAC;QACb,OAAO,IAAI;MACZ;IACD,CAAC,CAAC,OAAO6B,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C,OAAO,IAAI;IACZ;EACD,CAAC;EAED,MAAMe,YAAY,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACH,MAAMhC,QAAQ,GAAG,MAAMqB,SAAS,CAAC,WAAW,CAAC;MAC7C,IAAI,CAACrB,QAAQ,CAACO,EAAE,EAAE;QACjB,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;MAC3C;MACA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAClCpB,UAAU,CAACmB,IAAI,CAAC;IACjB,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C3B,UAAU,CAAC,EAAE,CAAC;IACf;EACD,CAAC;EAED,MAAM2C,UAAU,GAAG,MAAOC,WAAW,IAAK;IACzC,IAAI,CAAC3C,WAAW,IAAI,CAACN,IAAI,EAAE;MAC1BiC,OAAO,CAACD,KAAK,CAAC,mCAAmC,CAAC;MAClD;IACD;IACA,IAAI;MACHC,OAAO,CAACU,GAAG,CAAC,0BAA0B,EAAEM,WAAW,CAAC;MACpD,MAAMlC,QAAQ,GAAG,MAAMqB,SAAS,CAAC,UAAUpC,IAAI,CAAC8C,EAAE,GAAG,EAAE;QACtD7B,MAAM,EAAE,OAAO;QACfC,OAAO,EAAE;UACR,cAAc,EAAE;QACjB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC4B,WAAW;MACjC,CAAC,CAAC;MACFhB,OAAO,CAACU,GAAG,CAAC,8BAA8B,EAAE5B,QAAQ,CAACyB,MAAM,CAAC;MAC5D,IAAIzB,QAAQ,CAACyB,MAAM,KAAK,GAAG,EAAE;QAC5BP,OAAO,CAACD,KAAK,CAAC,kDAAkD,CAAC;QACjE/B,OAAO,CAAC,IAAI,CAAC;QACbM,cAAc,CAAC,IAAI,CAAC;QACpBE,eAAe,CAAC,IAAI,CAAC;QACrB,IAAIE,SAAS,CAACC,OAAO,EAAE;UACtBF,QAAQ,CAAC,QAAQ,CAAC;QACnB;QACA;MACD;MACA,IAAI,CAACK,QAAQ,CAACO,EAAE,EAAE;QACjB,MAAM4B,SAAS,GAAG,MAAMnC,QAAQ,CAACoC,IAAI,CAAC,CAAC;QACvClB,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEkB,SAAS,CAAC;QAChD,MAAM,IAAI3B,KAAK,CAAC,gCAAgC,CAAC;MAClD;MACA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAClCQ,OAAO,CAACU,GAAG,CAAC,oBAAoB,EAAEnB,IAAI,CAAC;MACvCvB,OAAO,CAACuB,IAAI,CAAC;IACd,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC7C;EACD,CAAC;EAED,MAAMa,WAAW,GAAG,MAAOO,MAAM,IAAK;IACrC,IAAI;MACHnB,OAAO,CAACU,GAAG,CAAC,6BAA6B,EAAES,MAAM,CAAC;MAClD,MAAMrC,QAAQ,GAAG,MAAMqB,SAAS,CAAC,iBAAiBgB,MAAM,EAAE,CAAC;MAC3D,MAAM5B,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAClCQ,OAAO,CAACU,GAAG,CAAC,iBAAiB,EAAEnB,IAAI,CAAC;MACpCrB,SAAS,CAACkD,KAAK,CAACC,OAAO,CAAC9B,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,CAAC;IAC3C,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C7B,SAAS,CAAC,EAAE,CAAC;IACd;EACD,CAAC;EAED,MAAMoD,cAAc,GAAG/D,WAAW,CAAC,YAAY;IAC9C,IAAI;MACH,MAAMuB,QAAQ,GAAG,MAAMqB,SAAS,CAAC,UAAU,CAAC;MAC5C,IAAI,CAACrB,QAAQ,CAACO,EAAE,EAAE;QACjB,MAAM4B,SAAS,GAAG,MAAMnC,QAAQ,CAACoC,IAAI,CAAC,CAAC;QACvClB,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEkB,SAAS,CAAC;QAChD/C,SAAS,CAAC,EAAE,CAAC;QACb;MACD;MACA,MAAMqB,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAClCQ,OAAO,CAACU,GAAG,CAAC,qBAAqB,EAAEnB,IAAI,CAAC;MACxCrB,SAAS,CAACkD,KAAK,CAACC,OAAO,CAAC9B,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,CAAC;IAC3C,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD7B,SAAS,CAAC,EAAE,CAAC;IACd;EACD,CAAC,EAAE,CAACiC,SAAS,CAAC,CAAC;EAEf,MAAMoB,WAAW,GAAG,MAAMC,QAAQ,IAAI;IACrC,IAAI;MACH,MAAMtC,IAAI,GAAG;QAAEuC,SAAS,EAAED;MAAS,CAAC;MACpCxB,OAAO,CAACU,GAAG,CAAC,8BAA8B,EAAExB,IAAI,CAAC;MACjD,MAAMJ,QAAQ,GAAG,MAAMqB,SAAS,CAAC,UAAU,EAAE;QAC5CnB,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACR,cAAc,EAAE;QACjB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACF,IAAI;MAC1B,CAAC,CAAC;MACF,MAAMwC,QAAQ,GAAG,MAAM5C,QAAQ,CAACU,IAAI,CAAC,CAAC;MACtCQ,OAAO,CAACU,GAAG,CAAC,4BAA4B,EAAEgB,QAAQ,CAAC;MACnD,IAAI,CAAC5C,QAAQ,CAACO,EAAE,EAAE;QACjB,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACC,SAAS,CAACsC,QAAQ,CAAC,CAAC;MAC1C;MACAxD,SAAS,CAAC,CAAC,GAAGD,MAAM,EAAEyD,QAAQ,CAAC,CAAC;MAChC,OAAOA,QAAQ;IAChB,CAAC,CAAC,OAAO3B,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC9C;EACD,CAAC;EAED,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACpBlC,OAAO,CAAC,IAAI,CAAC;IACbM,cAAc,CAAC,IAAI,CAAC;IACpBE,eAAe,CAAC,IAAI,CAAC;IACrB,IAAIE,SAAS,CAACC,OAAO,EAAE;MACtBF,QAAQ,CAAC,QAAQ,CAAC;IACnB;EACD,CAAC;EAED,oBACCf,OAAA,CAACC,WAAW,CAACgE,QAAQ;IAACC,KAAK,EAAE;MAAE7D,IAAI;MAAEE,MAAM;MAAEC,SAAS;MAAEC,OAAO;MAAEC,UAAU;MAAEQ,KAAK;MAAE2C,WAAW;MAAER,UAAU;MAAEnB,SAAS;MAAE0B,cAAc;MAAER,YAAY;MAAEzC,WAAW;MAAE6B,MAAM;MAAEC;IAAU,CAAE;IAAAtC,QAAA,EACrLA;EAAQ;IAAAgE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAEzB;AAAClE,EAAA,CA/OeF,YAAY;EAAA,QAMVJ,WAAW;AAAA;AAAAyE,EAAA,GANbrE,YAAY;AAiP5B,OAAO,SAASsE,OAAOA,CAAA,EAAG;EAAAC,GAAA;EACzB,OAAO/E,UAAU,CAACO,WAAW,CAAC;AAC/B;AAACwE,GAAA,CAFeD,OAAO;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}