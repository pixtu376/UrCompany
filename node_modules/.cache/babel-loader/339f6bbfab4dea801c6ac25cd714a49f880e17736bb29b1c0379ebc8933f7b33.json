{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\denis\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F\\\\my-app\\\\src\\\\components\\\\Tariffs.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useLocation, Link } from 'react-router-dom';\nimport '../Styles/Tariffs.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Tariffs() {\n  _s();\n  var _location$state;\n  const [tariffs, setTariffs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const location = useLocation();\n  let clientType = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.clientType;\n\n  // Маппинг clientType для соответствия backend\n  if (clientType === 'juridical' || clientType === 'legal') {\n    clientType = 'corporate';\n  } else if (clientType !== 'individual') {\n    clientType = null;\n  }\n  useEffect(() => {\n    const fetchTariffs = async () => {\n      try {\n        let fetchUrl = 'http://localhost:8000/tariffs/';\n        if (clientType) {\n          fetchUrl += `?client_type=${clientType}`;\n        }\n        const response = await fetch(fetchUrl);\n        if (!response.ok) {\n          const text = await response.text();\n          throw new Error(`Ошибка сервера: ${response.status} ${text}`);\n        }\n        const data = await response.json();\n        setTariffs(data);\n        setError(null);\n      } catch (error) {\n        console.error('Error fetching tariffs:', error);\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchTariffs();\n  }, [clientType]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0442\\u0430\\u0440\\u0438\\u0444\\u043E\\u0432...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 22\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error\",\n    children: [\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0442\\u0430\\u0440\\u0438\\u0444\\u043E\\u0432: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 20\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tariffs-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: clientType === 'individual' ? 'Тарифы для физических лиц' : 'Тарифы для юридических лиц'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tariffs-grid\",\n      children: tariffs.map(tariff => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tariff-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: tariff.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"description\",\n          children: tariff.short_description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tariff-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"price\",\n            children: [tariff.price, \" \\u20BD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/tariff/${tariff.id}`,\n            className: \"details-button\",\n            children: \"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 7\n        }, this)]\n      }, tariff.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 6\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 3\n  }, this);\n}\n_s(Tariffs, \"9XmrMNmFJApaA9r+oASw66zuuKU=\", false, function () {\n  return [useLocation];\n});\n_c = Tariffs;\nexport default Tariffs;\nvar _c;\n$RefreshReg$(_c, \"Tariffs\");","map":{"version":3,"names":["React","useState","useEffect","useLocation","Link","jsxDEV","_jsxDEV","Tariffs","_s","_location$state","tariffs","setTariffs","loading","setLoading","error","setError","location","clientType","state","fetchTariffs","fetchUrl","response","fetch","ok","text","Error","status","data","json","console","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","tariff","name","short_description","price","to","id","_c","$RefreshReg$"],"sources":["C:/Users/denis/OneDrive/Документы/Курсовая/my-app/src/components/Tariffs.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useLocation, Link } from 'react-router-dom'\r\nimport '../Styles/Tariffs.css'\r\n\r\nfunction Tariffs() {\r\n\tconst [tariffs, setTariffs] = useState([])\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [error, setError] = useState(null)\r\n\tconst location = useLocation()\r\n\tlet clientType = location.state?.clientType\r\n\r\n\t// Маппинг clientType для соответствия backend\r\n\tif (clientType === 'juridical' || clientType === 'legal') {\r\n\t\tclientType = 'corporate'\r\n\t} else if (clientType !== 'individual') {\r\n\t\tclientType = null\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchTariffs = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tlet fetchUrl = 'http://localhost:8000/tariffs/'\r\n\t\t\t\tif (clientType) {\r\n\t\t\t\t\tfetchUrl += `?client_type=${clientType}`\r\n\t\t\t\t}\r\n\t\t\t\tconst response = await fetch(fetchUrl)\r\n\t\t\t\tif (!response.ok) {\r\n\t\t\t\t\tconst text = await response.text()\r\n\t\t\t\t\tthrow new Error(`Ошибка сервера: ${response.status} ${text}`)\r\n\t\t\t\t}\r\n\t\t\t\tconst data = await response.json()\r\n\t\t\t\tsetTariffs(data)\r\n\t\t\t\tsetError(null)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error fetching tariffs:', error)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfetchTariffs()\r\n\t}, [clientType])\r\n\r\n\tif (loading) return <div className='loading'>Загрузка тарифов...</div>\r\n\tif (error) return <div className='error'>Ошибка загрузки тарифов: {error}</div>\r\n\r\n\treturn (\r\n\t\t<div className='tariffs-page'>\r\n\t\t\t<h1>\r\n\t\t\t\t{clientType === 'individual'\r\n\t\t\t\t\t? 'Тарифы для физических лиц'\r\n\t\t\t\t\t: 'Тарифы для юридических лиц'}\r\n\t\t\t</h1>\r\n\r\n\t\t\t<div className='tariffs-grid'>\r\n\t\t\t\t{tariffs.map(tariff => (\r\n\t\t\t\t\t<div key={tariff.id} className='tariff-card'>\r\n\t\t\t\t\t\t<h2>{tariff.name}</h2>\r\n\t\t\t\t\t\t<p className='description'>{tariff.short_description}</p>\r\n\t\t\t\t\t\t<div className='tariff-footer'>\r\n\t\t\t\t\t\t\t<p className='price'>{tariff.price} ₽</p>\r\n\t\t\t\t\t\t\t<Link to={`/tariff/${tariff.id}`} className='details-button'>\r\n\t\t\t\t\t\t\t\tПодробнее\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Tariffs\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}