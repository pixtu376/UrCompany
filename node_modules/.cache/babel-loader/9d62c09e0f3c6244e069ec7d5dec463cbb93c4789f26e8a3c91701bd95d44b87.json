{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\denis\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F\\\\my-app\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useState, useContext, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const navigate = useNavigate();\n  const login = async credentials => {\n    try {\n      const response = await fetch('/api/users/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n      const data = await response.json();\n      setUser(data);\n      fetchOrders(data.id);\n      navigate('/dashboard');\n    } catch (error) {\n      console.error('Login error:', error);\n    }\n  };\n  const fetchOrders = async userId => {\n    try {\n      const response = await fetch(`/api/orders/?user=${userId}`);\n      const data = await response.json();\n      setOrders(data);\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n    }\n  };\n  const createOrder = async tariffId => {\n    try {\n      const response = await fetch('/api/orders/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          tariff: tariffId\n        })\n      });\n      const newOrder = await response.json();\n      setOrders([...orders, newOrder]);\n      return newOrder;\n    } catch (error) {\n      console.error('Error creating order:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      orders,\n      login,\n      createOrder\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 3\n  }, this);\n}\n_s(AuthProvider, \"Ubtfo0JVNxFigaYct2N/DKAsu0U=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  return useContext(AuthContext);\n}\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","useContext","useEffect","useNavigate","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","orders","setOrders","navigate","login","credentials","response","fetch","method","headers","body","JSON","stringify","data","json","fetchOrders","id","error","console","userId","createOrder","tariffId","tariff","newOrder","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/denis/OneDrive/Документы/Курсовая/my-app/src/contexts/AuthContext.js"],"sourcesContent":["import { createContext, useState, useContext, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport function AuthProvider({ children }) {\r\n\tconst [user, setUser] = useState(null)\r\n\tconst [orders, setOrders] = useState([])\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst login = async credentials => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch('/api/users/', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify(credentials),\r\n\t\t\t})\r\n\t\t\tconst data = await response.json()\r\n\t\t\tsetUser(data)\r\n\t\t\tfetchOrders(data.id)\r\n\t\t\tnavigate('/dashboard')\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Login error:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchOrders = async userId => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(`/api/orders/?user=${userId}`)\r\n\t\t\tconst data = await response.json()\r\n\t\t\tsetOrders(data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching orders:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst createOrder = async tariffId => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch('/api/orders/', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify({ tariff: tariffId }),\r\n\t\t\t})\r\n\t\t\tconst newOrder = await response.json()\r\n\t\t\tsetOrders([...orders, newOrder])\r\n\t\t\treturn newOrder\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error creating order:', error)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ user, orders, login, createOrder }}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n\r\nexport function useAuth() {\r\n\treturn useContext(AuthContext)\r\n}\r\n"],"mappings":";;;AAAA,SAASA,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACtE,SAASC,WAAW,QAAQ,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC;AAEnC,OAAO,SAASQ,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAC1C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAMc,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAMY,KAAK,GAAG,MAAMC,WAAW,IAAI;IAClC,IAAI;MACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,aAAa,EAAE;QAC3CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,WAAW;MACjC,CAAC,CAAC;MACF,MAAMQ,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAClCd,OAAO,CAACa,IAAI,CAAC;MACbE,WAAW,CAACF,IAAI,CAACG,EAAE,CAAC;MACpBb,QAAQ,CAAC,YAAY,CAAC;IACvB,CAAC,CAAC,OAAOc,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;IACrC;EACD,CAAC;EAED,MAAMF,WAAW,GAAG,MAAMI,MAAM,IAAI;IACnC,IAAI;MACH,MAAMb,QAAQ,GAAG,MAAMC,KAAK,CAAC,qBAAqBY,MAAM,EAAE,CAAC;MAC3D,MAAMN,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAClCZ,SAAS,CAACW,IAAI,CAAC;IAChB,CAAC,CAAC,OAAOI,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAC/C;EACD,CAAC;EAED,MAAMG,WAAW,GAAG,MAAMC,QAAQ,IAAI;IACrC,IAAI;MACH,MAAMf,QAAQ,GAAG,MAAMC,KAAK,CAAC,cAAc,EAAE;QAC5CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEU,MAAM,EAAED;QAAS,CAAC;MAC1C,CAAC,CAAC;MACF,MAAME,QAAQ,GAAG,MAAMjB,QAAQ,CAACQ,IAAI,CAAC,CAAC;MACtCZ,SAAS,CAAC,CAAC,GAAGD,MAAM,EAAEsB,QAAQ,CAAC,CAAC;MAChC,OAAOA,QAAQ;IAChB,CAAC,CAAC,OAAON,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC9C;EACD,CAAC;EAED,oBACCvB,OAAA,CAACC,WAAW,CAAC6B,QAAQ;IAACC,KAAK,EAAE;MAAE1B,IAAI;MAAEE,MAAM;MAAEG,KAAK;MAAEgB;IAAY,CAAE;IAAAvB,QAAA,EAChEA;EAAQ;IAAA6B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAEzB;AAAC/B,EAAA,CAnDeF,YAAY;EAAA,QAGVJ,WAAW;AAAA;AAAAsC,EAAA,GAHblC,YAAY;AAqD5B,OAAO,SAASmC,OAAOA,CAAA,EAAG;EAAAC,GAAA;EACzB,OAAO1C,UAAU,CAACK,WAAW,CAAC;AAC/B;AAACqC,GAAA,CAFeD,OAAO;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}