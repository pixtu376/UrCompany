{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\denis\\\\OneDrive\\\\\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\\\\\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F\\\\my-app\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCallback } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const [tariffs, setTariffs] = useState([]);\n  const [accessToken, setAccessToken] = useState(null);\n  const navigate = useNavigate();\n  const login = async credentials => {\n    try {\n      const response = await fetch('http://localhost:8000/auth/token/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n      if (!response.ok) {\n        throw new Error('Ошибка авторизации');\n      }\n      const data = await response.json();\n      setAccessToken(data.access);\n      const userData = await fetchUser(data.access);\n      // Навигация в зависимости от роли пользователя\n      if (userData && userData.is_staff) {\n        navigate('/admin-tariffs');\n      } else if (userData && userData.is_worker) {\n        navigate('/worker');\n      } else {\n        navigate('/dashboard');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n    }\n  };\n  const fetchUser = async token => {\n    try {\n      console.log('Access token in fetchUser:', token);\n      const response = await fetch('http://localhost:8000/users/me/', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.status === 401) {\n        console.error('Unauthorized in fetchUser, redirecting to login');\n        setUser(null);\n        setAccessToken(null);\n        navigate('/login');\n        return null;\n      }\n      const data = await response.json();\n      if (data) {\n        setUser(data);\n        console.log('User is_worker:', data.is_worker);\n        await fetchOrders(data.id, token);\n        await fetchTariffs(token);\n        return data;\n      } else {\n        setUser(null);\n        setOrders([]);\n        return null;\n      }\n    } catch (error) {\n      console.error('Error fetching user:', error);\n      return null;\n    }\n  };\n  const fetchTariffs = async token => {\n    try {\n      const response = await fetch('http://localhost:8000/tariffs/', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Ошибка загрузки тарифов');\n      }\n      const data = await response.json();\n      setTariffs(data);\n    } catch (error) {\n      console.error('Error fetching tariffs:', error);\n      setTariffs([]);\n    }\n  };\n  const updateUser = async (updatedData, token) => {\n    if (!token || !user) {\n      console.error('No access token or user to update');\n      return;\n    }\n    try {\n      console.log('Updating user with data:', updatedData);\n      const response = await fetch(`http://localhost:8000/users/${user.id}/`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(updatedData)\n      });\n      console.log('Update user response status:', response.status);\n      if (response.status === 401) {\n        console.error('Unauthorized in updateUser, redirecting to login');\n        setUser(null);\n        setAccessToken(null);\n        navigate('/login');\n        return;\n      }\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response text:', errorText);\n        throw new Error('Ошибка обновления пользователя');\n      }\n      const data = await response.json();\n      console.log('Updated user data:', data);\n      setUser(data);\n    } catch (error) {\n      console.error('Error updating user:', error);\n    }\n  };\n  const fetchOrders = async (userId, token) => {\n    try {\n      console.log('Access token in fetchOrders:', token);\n      console.log('Fetching orders for userId:', userId);\n      const response = await fetch(`http://localhost:8000/orders/?user=${userId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await response.json();\n      console.log('Orders fetched:', data);\n      setOrders(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n      setOrders([]);\n    }\n  };\n  const fetchAllOrders = useCallback(async token => {\n    try {\n      console.log('Access token in fetchAllOrders:', token);\n      const response = await fetch(`http://localhost:8000/orders/`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Error response text:', errorText);\n        setOrders([]);\n        return;\n      }\n      const data = await response.json();\n      console.log('All orders fetched:', data);\n      setOrders(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching all orders:', error);\n      setOrders([]);\n    }\n  }, []);\n  const createOrder = async tariffId => {\n    try {\n      const body = {\n        tariff_id: tariffId\n      };\n      console.log('Access token in createOrder:', accessToken);\n      console.log('Request body in createOrder:', body);\n      const response = await fetch('http://localhost:8000/orders/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${accessToken}`\n        },\n        body: JSON.stringify(body)\n      });\n      const newOrder = await response.json();\n      console.log('Response from createOrder:', newOrder);\n      if (!response.ok) {\n        throw new Error(JSON.stringify(newOrder));\n      }\n      setOrders([...orders, newOrder]);\n      return newOrder;\n    } catch (error) {\n      console.error('Error creating order:', error);\n    }\n  };\n  const logout = () => {\n    setUser(null);\n    setAccessToken(null);\n    navigate('/login');\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      orders,\n      setOrders,\n      login,\n      createOrder,\n      updateUser,\n      fetchUser,\n      fetchAllOrders,\n      accessToken,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 3\n  }, this);\n}\n_s(AuthProvider, \"4GcuoBJS08ujVDYkTK/83hLu4KE=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  return useContext(AuthContext);\n}\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","useContext","useNavigate","useCallback","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","user","setUser","orders","setOrders","tariffs","setTariffs","accessToken","setAccessToken","navigate","login","credentials","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","access","userData","fetchUser","is_staff","is_worker","error","console","token","log","Authorization","status","fetchOrders","id","fetchTariffs","updateUser","updatedData","errorText","text","userId","Array","isArray","fetchAllOrders","createOrder","tariffId","tariff_id","newOrder","logout","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/denis/OneDrive/Документы/Курсовая/my-app/src/contexts/AuthContext.js"],"sourcesContent":["import { createContext, useState, useContext } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useCallback } from 'react'\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport function AuthProvider({ children }) {\r\n\tconst [user, setUser] = useState(null)\r\n\tconst [orders, setOrders] = useState([])\r\n\tconst [tariffs, setTariffs] = useState([])\r\n\tconst [accessToken, setAccessToken] = useState(null)\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst login = async credentials => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch('http://localhost:8000/auth/token/', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\t\tbody: JSON.stringify(credentials),\r\n\t\t\t})\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error('Ошибка авторизации')\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tsetAccessToken(data.access)\r\n\t\t\tconst userData = await fetchUser(data.access)\r\n\t\t\t// Навигация в зависимости от роли пользователя\r\n\t\t\tif (userData && userData.is_staff) {\r\n\t\t\t\tnavigate('/admin-tariffs')\r\n\t\t\t} else if (userData && userData.is_worker) {\r\n\t\t\t\tnavigate('/worker')\r\n\t\t\t} else {\r\n\t\t\t\tnavigate('/dashboard')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Login error:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchUser = async (token) => {\r\n\t\ttry {\r\n\t\t\tconsole.log('Access token in fetchUser:', token)\r\n\t\t\tconst response = await fetch('http://localhost:8000/users/me/', {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tif (response.status === 401) {\r\n\t\t\t\tconsole.error('Unauthorized in fetchUser, redirecting to login')\r\n\t\t\t\tsetUser(null)\r\n\t\t\t\tsetAccessToken(null)\r\n\t\t\t\tnavigate('/login')\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tif (data) {\r\n\t\t\t\tsetUser(data)\r\n\t\t\t\tconsole.log('User is_worker:', data.is_worker)\r\n\t\t\t\tawait fetchOrders(data.id, token)\r\n\t\t\t\tawait fetchTariffs(token)\r\n\t\t\t\treturn data\r\n\t\t\t} else {\r\n\t\t\t\tsetUser(null)\r\n\t\t\t\tsetOrders([])\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching user:', error)\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchTariffs = async (token) => {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch('http://localhost:8000/tariffs/', {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error('Ошибка загрузки тарифов')\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tsetTariffs(data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching tariffs:', error)\r\n\t\t\tsetTariffs([])\r\n\t\t}\r\n\t}\r\n\r\n\tconst updateUser = async (updatedData, token) => {\r\n\t\tif (!token || !user) {\r\n\t\t\tconsole.error('No access token or user to update')\r\n\t\t\treturn\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconsole.log('Updating user with data:', updatedData)\r\n\t\t\tconst response = await fetch(`http://localhost:8000/users/${user.id}/`, {\r\n\t\t\t\tmethod: 'PATCH',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(updatedData),\r\n\t\t\t})\r\n\t\t\tconsole.log('Update user response status:', response.status)\r\n\t\t\tif (response.status === 401) {\r\n\t\t\t\tconsole.error('Unauthorized in updateUser, redirecting to login')\r\n\t\t\t\tsetUser(null)\r\n\t\t\t\tsetAccessToken(null)\r\n\t\t\t\tnavigate('/login')\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tconst errorText = await response.text()\r\n\t\t\t\tconsole.error('Error response text:', errorText)\r\n\t\t\t\tthrow new Error('Ошибка обновления пользователя')\r\n\t\t\t}\r\n\t\t\tconst data = await response.json()\r\n\t\t\tconsole.log('Updated user data:', data)\r\n\t\t\tsetUser(data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error updating user:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchOrders = async (userId, token) => {\r\n\t\ttry {\r\n\t\t\tconsole.log('Access token in fetchOrders:', token)\r\n\t\t\tconsole.log('Fetching orders for userId:', userId)\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\t`http://localhost:8000/orders/?user=${userId}`,\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tconst data = await response.json()\r\n\t\t\tconsole.log('Orders fetched:', data)\r\n\t\t\tsetOrders(Array.isArray(data) ? data : [])\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching orders:', error)\r\n\t\t\tsetOrders([])\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchAllOrders = useCallback(async (token) => {\r\n\t\ttry {\r\n\t\t\tconsole.log('Access token in fetchAllOrders:', token)\r\n\t\tconst response = await fetch(\r\n\t\t\t`http://localhost:8000/orders/`,\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t)\r\n\t\tif (!response.ok) {\r\n\t\t\tconst errorText = await response.text()\r\n\t\t\tconsole.error('Error response text:', errorText)\r\n\t\t\tsetOrders([])\r\n\t\t\treturn\r\n\t\t}\r\n\t\tconst data = await response.json()\r\n\t\tconsole.log('All orders fetched:', data)\r\n\t\tsetOrders(Array.isArray(data) ? data : [])\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching all orders:', error)\r\n\t\t\tsetOrders([])\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst createOrder = async tariffId => {\r\n\t\ttry {\r\n\t\t\tconst body = { tariff_id: tariffId }\r\n\t\t\tconsole.log('Access token in createOrder:', accessToken)\r\n\t\t\tconsole.log('Request body in createOrder:', body)\r\n\t\t\tconst response = await fetch('http://localhost:8000/orders/', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\tAuthorization: `Bearer ${accessToken}`,\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(body),\r\n\t\t\t})\r\n\t\t\tconst newOrder = await response.json()\r\n\t\t\tconsole.log('Response from createOrder:', newOrder)\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error(JSON.stringify(newOrder))\r\n\t\t\t}\r\n\t\t\tsetOrders([...orders, newOrder])\r\n\t\t\treturn newOrder\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error creating order:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst logout = () => {\r\n\t\tsetUser(null)\r\n\t\tsetAccessToken(null)\r\n\t\tnavigate('/login')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ user, orders, setOrders, login, createOrder, updateUser, fetchUser, fetchAllOrders, accessToken, logout }}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n\r\nexport function useAuth() {\r\n\treturn useContext(AuthContext)\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}